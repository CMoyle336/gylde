<h2 mat-dialog-title>
  <mat-icon>feedback</mat-icon>
  {{ 'FOUNDER_FEEDBACK.TITLE' | translate }}
</h2>

<div mat-dialog-content>
  @if (submitted()) {
    <!-- Success State -->
    <div class="success-state">
      <mat-icon class="success-icon">check_circle</mat-icon>
      <h3>{{ 'FOUNDER_FEEDBACK.SUCCESS.TITLE' | translate }}</h3>
      <p>
        {{ 'FOUNDER_FEEDBACK.SUCCESS.BODY' | translate }}
      </p>
      <p class="note">
        {{ 'FOUNDER_FEEDBACK.SUCCESS.NOTE' | translate }}
      </p>
    </div>
  } @else {
    <!-- Issue Form -->
    <p class="intro-text">
      {{ 'FOUNDER_FEEDBACK.INTRO' | translate }}
    </p>

    <div class="category-section">
      <label class="section-label">{{ 'FOUNDER_FEEDBACK.CATEGORY_PROMPT' | translate }}</label>
      <mat-radio-group [(ngModel)]="selectedCategory" class="category-list">
        @for (category of categories; track category.value) {
          <mat-radio-button [value]="category.value">
            <span class="category-option">
              <mat-icon>{{ category.icon }}</mat-icon>
              {{ category.labelKey | translate }}
            </span>
          </mat-radio-button>
        }
      </mat-radio-group>
    </div>

    <div class="title-section">
      <label class="section-label" for="title">{{ 'FOUNDER_FEEDBACK.FIELDS.SUMMARY_LABEL' | translate }}</label>
      <input
        id="title"
        type="text"
        [(ngModel)]="title"
        [placeholder]="'FOUNDER_FEEDBACK.FIELDS.SUMMARY_PLACEHOLDER' | translate"
        maxlength="200">
      <span class="char-count">{{ title.length }} / 200</span>
    </div>

    <div class="description-section">
      <label class="section-label" for="description">{{ 'FOUNDER_FEEDBACK.FIELDS.DETAILS_LABEL' | translate }}</label>
      <textarea
        id="description"
        [(ngModel)]="description"
        [placeholder]="'FOUNDER_FEEDBACK.FIELDS.DETAILS_PLACEHOLDER' | translate"
        rows="4"
        maxlength="2000">
      </textarea>
      <span class="char-count">{{ description.length }} / 2000</span>
    </div>

    @if (error()) {
      <div class="error-message">
        <mat-icon>error</mat-icon>
        {{ error() | translate }}
      </div>
    }
  }
</div>

<div mat-dialog-actions align="end">
  @if (submitted()) {
    <button mat-flat-button color="primary" (click)="close()">
      {{ 'FOUNDER_FEEDBACK.ACTIONS.DONE' | translate }}
    </button>
  } @else {
    <button mat-button (click)="close()" [disabled]="loading()">
      {{ 'FOUNDER_FEEDBACK.ACTIONS.CANCEL' | translate }}
    </button>
    <button 
      mat-flat-button 
      color="primary" 
      (click)="submitIssue()"
      [disabled]="loading() || !selectedCategory || !title.trim()">
      @if (loading()) {
        <mat-spinner diameter="20"></mat-spinner>
      } @else {
        {{ 'FOUNDER_FEEDBACK.ACTIONS.SUBMIT' | translate }}
      }
    </button>
  }
</div>
