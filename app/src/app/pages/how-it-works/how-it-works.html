<app-public-header
  (signInClicked)="navigateToAuth()"
  (getStartedClicked)="navigateToAuth()"
/>

<div class="how-it-works-page">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-backdrop"></div>
    <div class="hero-content">
      <span class="hero-badge">{{ 'HOW_IT_WORKS.HERO.BADGE' | translate }}</span>
      <h1 class="hero-title">{{ 'HOW_IT_WORKS.HERO.TITLE' | translate }} <span class="text-accent">{{ 'HOW_IT_WORKS.HERO.TITLE_ACCENT' | translate }}</span></h1>
      <p class="hero-description">{{ 'HOW_IT_WORKS.HERO.DESCRIPTION' | translate }}</p>
    </div>
  </section>

  <!-- Steps Section -->
  <section class="steps-section">
    <div class="section-container">
      <div class="steps-list">
        @for (step of steps; track step.number; let i = $index) {
          <div class="step-card" [class.reverse]="i % 2 === 1">
            <div class="step-content">
              <div class="step-number">{{ step.number }}</div>
              <h2 class="step-title">{{ step.titleKey | translate }}</h2>
              <p class="step-description">{{ step.descriptionKey | translate }}</p>
              <ul class="step-details">
                @for (detailKey of step.detailKeys; track detailKey) {
                  <li>
                    <span class="material-icons-outlined">check_circle</span>
                    {{ detailKey | translate }}
                  </li>
                }
              </ul>
            </div>
            <div class="step-visual">
              <div class="step-icon-wrapper">
                <span class="material-icons-outlined">{{ step.icon }}</span>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  </section>

  <!-- Membership Section -->
  <section class="membership-section">
    <div class="section-container">
      <div class="section-header">
        <span class="section-label">{{ 'HOW_IT_WORKS.MEMBERSHIP.LABEL' | translate }}</span>
        <h2 class="section-title">{{ 'HOW_IT_WORKS.MEMBERSHIP.TITLE' | translate }}</h2>
        <p class="section-description">
          {{ 'HOW_IT_WORKS.MEMBERSHIP.DESCRIPTION' | translate }}
        </p>
      </div>

      <div class="tiers-grid">
        @for (tier of tiers; track tier.nameKey) {
          <div class="tier-card" [class.highlighted]="tier.highlighted">
            @if (tier.highlighted) {
              <div class="tier-badge">{{ 'HOW_IT_WORKS.MEMBERSHIP.MOST_POPULAR' | translate }}</div>
            }
            <h3 class="tier-name">{{ tier.nameKey | translate }}</h3>
            <div class="tier-price">
              @if (tier.useDynamicPrice) {
                {{ premiumPriceFormatted() }}/{{ 'HOW_IT_WORKS.MEMBERSHIP.PRICE_SUFFIX' | translate }}
              } @else {
                {{ tier.priceKey | translate }}
              }
            </div>
            <p class="tier-description">{{ tier.descriptionKey | translate }}</p>
            <ul class="tier-features">
              @for (featureKey of tier.featureKeys; track featureKey) {
                <li>
                  <span class="material-icons-outlined">check</span>
                  {{ featureKey | translate }}
                </li>
              }
            </ul>
            <a routerLink="/" class="tier-btn" [class.primary]="tier.highlighted">
              {{ (tier.highlighted ? 'HOW_IT_WORKS.MEMBERSHIP.GET_STARTED' : 'HOW_IT_WORKS.MEMBERSHIP.LEARN_MORE') | translate }}
            </a>
          </div>
        }
      </div>
    </div>
  </section>

  <!-- Reputation System Section -->
  <section class="trust-section">
    <div class="section-container">
      <div class="trust-content">
        <div class="trust-info">
          <span class="section-label">{{ 'HOW_IT_WORKS.REPUTATION.LABEL' | translate }}</span>
          <h2 class="section-title">{{ 'HOW_IT_WORKS.REPUTATION.TITLE' | translate }}</h2>
          <p class="trust-description">
            {{ 'HOW_IT_WORKS.REPUTATION.DESCRIPTION' | translate }}
          </p>
          
          <div class="trust-factors">
            <div class="trust-factor">
              <span class="material-icons-outlined">photo_camera</span>
              <div>
                <h4>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.COMPLETE_PROFILE.TITLE' | translate }}</h4>
                <p>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.COMPLETE_PROFILE.DESCRIPTION' | translate }}</p>
              </div>
            </div>
            <div class="trust-factor">
              <span class="material-icons-outlined">verified</span>
              <div>
                <h4>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.IDENTITY_VERIFICATION.TITLE' | translate }}</h4>
                <p>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.IDENTITY_VERIFICATION.DESCRIPTION' | translate }}</p>
              </div>
            </div>
            <div class="trust-factor">
              <span class="material-icons-outlined">forum</span>
              <div>
                <h4>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.QUALITY_CONVERSATIONS.TITLE' | translate }}</h4>
                <p>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.QUALITY_CONVERSATIONS.DESCRIPTION' | translate }}</p>
              </div>
            </div>
            <div class="trust-factor">
              <span class="material-icons-outlined">trending_up</span>
              <div>
                <h4>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.CONSISTENT_ACTIVITY.TITLE' | translate }}</h4>
                <p>{{ 'HOW_IT_WORKS.REPUTATION.FACTORS.CONSISTENT_ACTIVITY.DESCRIPTION' | translate }}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="trust-visual">
          <div class="reputation-tiers">
            <div class="tier-badge-item">
              <span class="tier-label new">{{ 'HOW_IT_WORKS.REPUTATION.TIERS.NEW' | translate }}</span>
            </div>
            <div class="tier-badge-item">
              <span class="tier-label active">{{ 'HOW_IT_WORKS.REPUTATION.TIERS.ACTIVE' | translate }}</span>
            </div>
            <div class="tier-badge-item">
              <span class="tier-label established">{{ 'HOW_IT_WORKS.REPUTATION.TIERS.ESTABLISHED' | translate }}</span>
            </div>
            <div class="tier-badge-item">
              <span class="tier-label trusted">{{ 'HOW_IT_WORKS.REPUTATION.TIERS.TRUSTED' | translate }}</span>
            </div>
            <div class="tier-badge-item">
              <span class="tier-label distinguished">{{ 'HOW_IT_WORKS.REPUTATION.TIERS.DISTINGUISHED' | translate }}</span>
            </div>
          </div>
          <span class="trust-caption">{{ 'HOW_IT_WORKS.REPUTATION.CAPTION' | translate }}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="section-container">
      <div class="section-header">
        <span class="section-label">{{ 'HOW_IT_WORKS.FAQ.LABEL' | translate }}</span>
        <h2 class="section-title">{{ 'HOW_IT_WORKS.FAQ.TITLE' | translate }}</h2>
      </div>

      <div class="faq-list">
        @for (faq of faqs; track faq.questionKey; let i = $index) {
          <div class="faq-item" [class.expanded]="expandedFaq === i">
            <button class="faq-question" (click)="toggleFaq(i)">
              <span>{{ faq.questionKey | translate }}</span>
              <span class="material-icons-outlined">
                {{ expandedFaq === i ? 'expand_less' : 'expand_more' }}
              </span>
            </button>
            <div class="faq-answer">
              <p>{{ faq.answerKey | translate }}</p>
            </div>
          </div>
        }
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="section-container">
      <div class="cta-content">
        <h2 class="cta-title">{{ 'HOW_IT_WORKS.CTA.TITLE' | translate }} <span class="text-accent">{{ 'HOW_IT_WORKS.CTA.TITLE_ACCENT' | translate }}</span>?</h2>
        <p class="cta-description">
          {{ 'HOW_IT_WORKS.CTA.DESCRIPTION' | translate }}
        </p>
        <a routerLink="/" class="btn-primary btn-large">{{ 'HOW_IT_WORKS.CTA.BUTTON' | translate }}</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <app-public-footer />
</div>
